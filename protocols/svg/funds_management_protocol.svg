<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' contentScriptType='application/ecmascript' contentStyleType='text/css' height='1495px' preserveAspectRatio='none' style='width:515px;height:1495px;' version='1.1' viewBox='0 0 515 1495' width='515px' zoomAndPan='magnify'>
  <defs>
    <filter height='300%' id='f1aaklk9vp9ist' width='300%' x='-1' y='-1'>
      <feGaussianBlur result='blurOut' stdDeviation='2.0'/>
      <feColorMatrix in='blurOut' result='blurOut2' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0'/>
      <feOffset dx='4.0' dy='4.0' in='blurOut2' result='blurOut3'/>
      <feBlend in='SourceGraphic' in2='blurOut3' mode='normal'/>
    </filter>
  </defs>
  <g>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='1341.8906' style='stroke: #000000; stroke-width: 2.0;' width='480' x='13' y='72.6211'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='1187.7148' style='stroke: #000000; stroke-width: 2.0;' width='460' x='23' y='219.7969'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='1156.4043' style='stroke: #000000; stroke-width: 2.0;' width='440' x='33' y='244.1074'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='257.418' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='352.0391'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='241.4629' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='623.457'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='241.4629' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='878.9199'/>
    <rect fill='#FFFFFF' filter='url(#f1aaklk9vp9ist)' height='259.1289' style='stroke: #000000; stroke-width: 2.0;' width='420' x='43' y='1134.3828'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='55.6211' y2='89.9316'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='89.9316' y2='130.8867'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='130.8867' y2='130.8867'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='130.8867' y2='171.8418'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='171.8418' y2='171.8418'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='171.8418' y2='212.7969'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='212.7969' y2='369.3496'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='369.3496' y2='410.3047'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='410.3047' y2='439.6152'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='439.6152' y2='480.5703'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='480.5703' y2='568.502'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='568.502' y2='609.457'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='609.457' y2='695.0781'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='695.0781' y2='736.0332'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='736.0332' y2='794.6543'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='794.6543' y2='835.6094'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='835.6094' y2='950.541'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='950.541' y2='991.4961'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='991.4961' y2='1050.1172'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='1050.1172' y2='1091.0723'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='1091.0723' y2='1352.5566'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='82' x2='82' y1='1352.5566' y2='1393.5117'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='82' y1='1393.5117' y2='1431.5117'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='55.6211' y2='89.9316'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='89.9316' y2='130.8867'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='130.8867' y2='130.8867'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='130.8867' y2='171.8418'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='171.8418' y2='171.8418'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='171.8418' y2='212.7969'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='212.7969' y2='369.3496'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='369.3496' y2='410.3047'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='410.3047' y2='439.6152'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='439.6152' y2='480.5703'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='480.5703' y2='568.502'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='568.502' y2='609.457'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='609.457' y2='695.0781'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='695.0781' y2='736.0332'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='736.0332' y2='794.6543'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='794.6543' y2='835.6094'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='835.6094' y2='950.541'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='950.541' y2='991.4961'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='991.4961' y2='1050.1172'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='1050.1172' y2='1091.0723'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='1091.0723' y2='1352.5566'/>
    <line style='stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;' x1='402.5' x2='402.5' y1='1352.5566' y2='1393.5117'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='402.5' x2='402.5' y1='1393.5117' y2='1431.5117'/>
    <rect fill='#FEFECE' filter='url(#f1aaklk9vp9ist)' height='30.4883' style='stroke: #A80036; stroke-width: 1.5;' width='54' x='53' y='20.1328'/>
    <text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacingAndGlyphs' textLength='40' x='60' y='40.668'>
      Client
    </text>
    <rect fill='#FEFECE' filter='url(#f1aaklk9vp9ist)' height='30.4883' style='stroke: #A80036; stroke-width: 1.5;' width='54' x='53' y='1430.5117'/>
    <text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacingAndGlyphs' textLength='40' x='60' y='1451.0469'>
      Client
    </text>
    <rect fill='#FEFECE' filter='url(#f1aaklk9vp9ist)' height='30.4883' style='stroke: #A80036; stroke-width: 1.5;' width='57' x='372.5' y='20.1328'/>
    <text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacingAndGlyphs' textLength='43' x='379.5' y='40.668'>
      Server
    </text>
    <rect fill='#FEFECE' filter='url(#f1aaklk9vp9ist)' height='30.4883' style='stroke: #A80036; stroke-width: 1.5;' width='57' x='372.5' y='1430.5117'/>
    <text fill='#000000' font-family='sans-serif' font-size='14' lengthAdjust='spacingAndGlyphs' textLength='43' x='379.5' y='1451.0469'>
      Server
    </text>
    <path d='M13,72.6211 L219,72.6211 L219,79.6211 L209,89.6211 L13,89.6211 L13,72.6211 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='1341.8906' style='stroke: #000000; stroke-width: 2.0;' width='480' x='13' y='72.6211'/>
    <a href='#session_control_with_auth' xlink:href='#session_control_with_auth' target='_top' title='#session_control_with_auth' xlink:title='#session_control_with_auth' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='161' x='28' y='86.1895'>
        Session Control Protocol
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='0' x='155' y='114.5664'/>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='25' x='155' y='114.5664'>
      Note
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='150' x='180' y='114.5664'>
      : for simplicity, heartbeating
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='138' x='148.5' y='155.5215'>
      is not shown here but it is
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='47' x='289.5' y='155.5215'>
      required
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='0' x='339.5' y='155.5215'/>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='0' x='183.5' y='196.4766'/>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='118' x='183.5' y='196.4766'>
      to keep session alive
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='0' x='304.5' y='196.4766'/>
    <path d='M23,219.7969 L260,219.7969 L260,226.7969 L250,236.7969 L23,236.7969 L23,219.7969 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='1187.7148' style='stroke: #000000; stroke-width: 2.0;' width='460' x='23' y='219.7969'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='192' x='38' y='233.3652'>
      Funds Management Protocol
    </text>
    <path d='M33,244.1074 L126,244.1074 L126,251.1074 L116,261.1074 L33,261.1074 L33,244.1074 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='1156.4043' style='stroke: #000000; stroke-width: 2.0;' width='440' x='33' y='244.1074'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='48' x='48' y='257.6758'>
      i-Cycle
    </text>
    <polygon fill='#A80036' points='93,278.7285,83,282.7285,93,286.7285,89,282.7285' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='282.7285' y2='282.7285'/>
    <a href='#cycle_starting' xlink:href='#cycle_starting' target='_top' title='#cycle_starting' xlink:title='#cycle_starting' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='94' x='195.5' y='277.9863'>
        cycle_starting
      </text>
    </a>
    <polygon fill='#A80036' points='93,308.0391,83,312.0391,93,316.0391,89,312.0391' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='312.0391' y2='312.0391'/>
    <a href='#cycle_started' xlink:href='#cycle_started' target='_top' title='#cycle_started' xlink:title='#cycle_started' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='89' x='198' y='307.2969'>
        cycle_started
      </text>
    </a>
    <path d='M43,352.0391 L416,352.0391 L416,359.0391 L406,369.0391 L43,369.0391 L43,352.0391 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='257.418' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='352.0391'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='181' x='58' y='365.6074'>
      examples of asynchronous
    </text>
    <a href='#account_notifications' xlink:href='#account_notifications' target='_top' title='#account_notifications' xlink:title='#account_notifications' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='140' x='243' y='365.6074'>
        account notifications
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='3' x='383' y='365.6074'>
      :
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='43' x='163.5' y='393.9844'>
      account
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='109' x='209.5' y='393.9844'>
      consistency marker
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='3' x='318.5' y='393.9844'>
      :
    </text>
    <polygon fill='#A80036' points='93,427.6152,83,431.6152,93,435.6152,89,431.6152' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='431.6152' y2='431.6152'/>
    <a href='#account_consistency_marker' xlink:href='#account_consistency_marker' target='_top' title='#account_consistency_marker' xlink:title='#account_consistency_marker' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='195' x='145' y='426.873'>
        account_consistency_marker
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='148' x='168.5' y='464.25'>
      other account notifications:
    </text>
    <polygon fill='#A80036' points='93,497.8809,83,501.8809,93,505.8809,89,501.8809' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='501.8809' y2='501.8809'/>
    <a href='#account_restated_ltsimple_account_gt' xlink:href='#account_restated_ltsimple_account_gt' target='_top' title='#account_restated_ltsimple_account_gt' xlink:title='#account_restated_ltsimple_account_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='241' x='122' y='497.1387'>
        account_restated&lt;simple_account&gt;
      </text>
    </a>
    <polygon fill='#A80036' points='93,527.1914,83,531.1914,93,535.1914,89,531.1914' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='531.1914' y2='531.1914'/>
    <a href='#account_updated_ltmobile_app_account_gt' xlink:href='#account_updated_ltmobile_app_account_gt' target='_top' title='#account_updated_ltmobile_app_account_gt' xlink:title='#account_updated_ltmobile_app_account_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='276' x='104.5' y='526.4492'>
        account_updated&lt;mobile_app_account&gt;
      </text>
    </a>
    <polygon fill='#A80036' points='93,556.502,83,560.502,93,564.502,89,560.502' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='560.502' y2='560.502'/>
    <a href='#account_restated_ltmobile_app_account_gt' xlink:href='#account_restated_ltmobile_app_account_gt' target='_top' title='#account_restated_ltmobile_app_account_gt' xlink:title='#account_restated_ltmobile_app_account_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='275' x='105' y='555.7598'>
        account_restated&lt;mobile_app_account&gt;
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='53' x='216' y='593.1367'>
      and so on
    </text>
    <path d='M43,623.457 L203,623.457 L203,630.457 L193,640.457 L43,640.457 L43,623.457 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='241.4629' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='623.457'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='115' x='58' y='637.0254'>
      depositing funds
    </text>
    <polygon fill='#A80036' points='391,683.0781,401,687.0781,391,691.0781,395,687.0781' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='397' y1='687.0781' y2='687.0781'/>
    <a href='#deposit_funds' xlink:href='#deposit_funds' target='_top' title='#deposit_funds' xlink:title='#deposit_funds' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='96' x='194.5' y='682.3359'>
        deposit_funds
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='51' x='192.5' y='719.7129'>
      in case of
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='43' x='246.5' y='719.7129'>
      success
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='3' x='289.5' y='719.7129'>
      :
    </text>
    <polygon fill='#A80036' points='93,753.3438,83,757.3438,93,761.3438,89,757.3438' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='757.3438' y2='757.3438'/>
    <a href='#funds_deposit_pending' xlink:href='#funds_deposit_pending' target='_top' title='#funds_deposit_pending' xlink:title='#funds_deposit_pending' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='160' x='162.5' y='752.6016'>
        funds_deposit_pending
      </text>
    </a>
    <polygon fill='#A80036' points='93,782.6543,83,786.6543,93,790.6543,89,786.6543' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='786.6543' y2='786.6543'/>
    <a href='#funds_deposit_processed' xlink:href='#funds_deposit_processed' target='_top' title='#funds_deposit_processed' xlink:title='#funds_deposit_processed' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='297' x='94' y='781.9121'>
        funds_deposit_processed&lt;simple_account&gt;
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='51' x='195.5' y='819.2891'>
      in case of
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='37' x='249.5' y='819.2891'>
      failure
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='3' x='286.5' y='819.2891'>
      :
    </text>
    <polygon fill='#A80036' points='93,852.9199,83,856.9199,93,860.9199,89,856.9199' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='856.9199' y2='856.9199'/>
    <a href='#funds_action_rejected_ltdeposit_funds_gt' xlink:href='#funds_action_rejected_ltdeposit_funds_gt' target='_top' title='#funds_action_rejected_ltdeposit_funds_gt' xlink:title='#funds_action_rejected_ltdeposit_funds_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='265' x='110' y='852.1777'>
        funds_action_rejected&lt;deposit_funds&gt;
      </text>
    </a>
    <path d='M43,878.9199 L216,878.9199 L216,885.9199 L206,895.9199 L43,895.9199 L43,878.9199 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='241.4629' style='stroke: #000000; stroke-width: 2.0;' width='400.5' x='43' y='878.9199'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='128' x='58' y='892.4883'>
      withdrawing funds
    </text>
    <polygon fill='#A80036' points='391,938.541,401,942.541,391,946.541,395,942.541' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='82' x2='397' y1='942.541' y2='942.541'/>
    <a href='#withdraw_funds' xlink:href='#withdraw_funds' target='_top' title='#withdraw_funds' xlink:title='#withdraw_funds' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='109' x='188' y='937.7988'>
        withdraw_funds
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='51' x='192.5' y='975.1758'>
      in case of
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='43' x='246.5' y='975.1758'>
      success
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='3' x='289.5' y='975.1758'>
      :
    </text>
    <polygon fill='#A80036' points='93,1008.8066,83,1012.8066,93,1016.8066,89,1012.8066' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1012.8066' y2='1012.8066'/>
    <a href='#funds_withdrawal_pending' xlink:href='#funds_withdrawal_pending' target='_top' title='#funds_withdrawal_pending' xlink:title='#funds_withdrawal_pending' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='185' x='150' y='1008.0645'>
        funds_withdrawal_pending
      </text>
    </a>
    <polygon fill='#A80036' points='93,1038.1172,83,1042.1172,93,1046.1172,89,1042.1172' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1042.1172' y2='1042.1172'/>
    <a href='#funds_withdrawal_processed' xlink:href='#funds_withdrawal_processed' target='_top' title='#funds_withdrawal_processed' xlink:title='#funds_withdrawal_processed' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='197' x='144' y='1037.375'>
        funds_withdrawal_processed
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='51' x='195.5' y='1074.752'>
      in case of
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='37' x='249.5' y='1074.752'>
      failure
    </text>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='3' x='286.5' y='1074.752'>
      :
    </text>
    <polygon fill='#A80036' points='93,1108.3828,83,1112.3828,93,1116.3828,89,1112.3828' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1112.3828' y2='1112.3828'/>
    <a href='#funds_action_rejected_ltwithdraw_funds_gt' xlink:href='#funds_action_rejected_ltwithdraw_funds_gt' target='_top' title='#funds_action_rejected_ltwithdraw_funds_gt' xlink:title='#funds_action_rejected_ltwithdraw_funds_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='278' x='103.5' y='1107.6406'>
        funds_action_rejected&lt;withdraw_funds&gt;
      </text>
    </a>
    <path d='M43,1134.3828 L458,1134.3828 L458,1141.3828 L448,1151.3828 L43,1151.3828 L43,1134.3828 ' fill='#EEEEEE' style='stroke: #000000; stroke-width: 1.0;'/>
    <rect fill='none' height='259.1289' style='stroke: #000000; stroke-width: 2.0;' width='420' x='43' y='1134.3828'/>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='181' x='58' y='1147.9512'>
      examples of asynchronous
    </text>
    <a href='#funds_notifications' xlink:href='#funds_notifications' target='_top' title='#funds_notifications' xlink:title='#funds_notifications' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='182' x='243' y='1147.9512'>
        funds-related notifications
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' textLength='3' x='425' y='1147.9512'>
      :
    </text>
    <polygon fill='#A80036' points='93,1194.0039,83,1198.0039,93,1202.0039,89,1198.0039' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1198.0039' y2='1198.0039'/>
    <a href='#funds_deposit_pending' xlink:href='#funds_deposit_pending' target='_top' title='#funds_deposit_pending' xlink:title='#funds_deposit_pending' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='160' x='162.5' y='1193.2617'>
        funds_deposit_pending
      </text>
    </a>
    <polygon fill='#A80036' points='93,1223.3145,83,1227.3145,93,1231.3145,89,1227.3145' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1227.3145' y2='1227.3145'/>
    <a href='#funds_deposit_processed' xlink:href='#funds_deposit_processed' target='_top' title='#funds_deposit_processed' xlink:title='#funds_deposit_processed' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='297' x='94' y='1222.5723'>
        funds_deposit_processed&lt;simple_account&gt;
      </text>
    </a>
    <polygon fill='#A80036' points='93,1252.625,83,1256.625,93,1260.625,89,1256.625' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1256.625' y2='1256.625'/>
    <a href='#funds_withdrawal_pending' xlink:href='#funds_withdrawal_pending' target='_top' title='#funds_withdrawal_pending' xlink:title='#funds_withdrawal_pending' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='185' x='150' y='1251.8828'>
        funds_withdrawal_pending
      </text>
    </a>
    <polygon fill='#A80036' points='93,1281.9355,83,1285.9355,93,1289.9355,89,1285.9355' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1285.9355' y2='1285.9355'/>
    <a href='#funds_withdrawal_processed' xlink:href='#funds_withdrawal_processed' target='_top' title='#funds_withdrawal_processed' xlink:title='#funds_withdrawal_processed' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='197' x='144' y='1281.1934'>
        funds_withdrawal_processed
      </text>
    </a>
    <polygon fill='#A80036' points='93,1311.2461,83,1315.2461,93,1319.2461,89,1315.2461' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1315.2461' y2='1315.2461'/>
    <a href='#funds_action_rejected_ltdeposit_funds_gt' xlink:href='#funds_action_rejected_ltdeposit_funds_gt' target='_top' title='#funds_action_rejected_ltdeposit_funds_gt' xlink:title='#funds_action_rejected_ltdeposit_funds_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='265' x='110' y='1310.5039'>
        funds_action_rejected&lt;deposit_funds&gt;
      </text>
    </a>
    <polygon fill='#A80036' points='93,1340.5566,83,1344.5566,93,1348.5566,89,1344.5566' style='stroke: #A80036; stroke-width: 1.0;'/>
    <line style='stroke: #A80036; stroke-width: 1.0;' x1='87' x2='402' y1='1344.5566' y2='1344.5566'/>
    <a href='#funds_action_rejected_ltwithdraw_funds_gt' xlink:href='#funds_action_rejected_ltwithdraw_funds_gt' target='_top' title='#funds_action_rejected_ltwithdraw_funds_gt' xlink:title='#funds_action_rejected_ltwithdraw_funds_gt' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='13' font-weight='bold' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='278' x='103.5' y='1339.8145'>
        funds_action_rejected&lt;withdraw_funds&gt;
      </text>
    </a>
    <text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacingAndGlyphs' textLength='53' x='216' y='1377.1914'>
      and so on
    </text>
    <path d='M257.094,6.1328 C257.034,6.1328 256.989,6.1768 256.969,6.2268 L254.031,13.0398 L254,13.2278 L254,14.0408 C254,14.1008 254.034,14.1348 254.094,14.1348 L260.907,14.1348 C260.967,14.1348 261.001,14.1008 261.001,14.0408 L261.001,13.2278 L260.97,13.0398 L258.032,6.2268 C258.012,6.1768 257.967,6.1328 257.907,6.1328 L257.094,6.1328 M257,9.1328 L258,9.1328 L258,11.1328 L257,11.1328 L257,9.1328 M257,12.1328 L258,12.1328 L258,13.1328 L257,13.1328 L257,12.1328 ' fill='#888888' style='stroke: ; stroke-width: 0.0; stroke-dasharray: ;'/>
    <text fill='#888888' font-family='sans-serif' font-size='12' lengthAdjust='spacingAndGlyphs' textLength='186' x='263' y='14.6016'>
      Do not test in production, test in
    </text>
    <a href='#WS_API_Services_Sandbox' xlink:href='#WS_API_Services_Sandbox' target='_top' title='#WS_API_Services_Sandbox' xlink:title='#WS_API_Services_Sandbox' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='12' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='50' x='453' y='14.6016'>
        sandbox
      </text>
    </a>
    <path d='M394,1470 L390.25,1476.25 L392.75,1476.25 L392.75,1480 L396.5,1473.75 L394,1473.75 L394,1470 ' fill='#888888' style='stroke: ; stroke-width: 0.0; stroke-dasharray: ;'/>
    <text fill='#888888' font-family='sans-serif' font-size='10' lengthAdjust='spacingAndGlyphs' textLength='0' x='403' y='1481.6406'/>
    <a href='https://power.trade' xlink:href='https://power.trade' target='_top' title='https://power.trade' xlink:title='https://power.trade' xlink:actuate='onRequest' xlink:show='new' xlink:type='simple'>
      <text fill='#0000FF' font-family='sans-serif' font-size='9' lengthAdjust='spacingAndGlyphs' text-decoration='underline' textLength='100' x='403' y='1481.8516'>
        PowerTrade Exchange
      </text>
    </a>
    <!--MD5=[7e896fb486666f9855235481067eb226]
@startuml funds_management_protocol



skinparam sequenceMessageAlign center


right header
    <size:12><&warning>Do not test in production, test in [[#WS_API_Services_Sandbox sandbox]]</size>
endheader

right footer <size:15><&bolt></size> <size:9>[[https://power.trade PowerTrade Exchange]]</size>


group <b>[[#session_control_with_auth Session Control Protocol]]</b>

    ... <b>Note</b>: for simplicity, heartbeating ...
    ... is not shown here but it is <b>required</b> ...
    ... <b>to keep session alive</b> ...

    group <b>Funds Management Protocol</b>

        group i-Cycle
            Client <- Server : <b>[[#cycle_starting cycle_starting]]</b>
            Client <- Server : <b>[[#cycle_started cycle_started]]</b>
            |||
            group examples of asynchronous [[#account_notifications account notifications]]:
                ... account <b>consistency marker</b>: ...
                Client <- Server : <b>[[#account_consistency_marker account_consistency_marker]]</b>
                ... other account notifications: ...
                Client <- Server : <b>[[#account_restated_ltsimple_account_gt account_restated<simple_account>]]</b>
                Client <- Server : <b>[[#account_updated_ltmobile_app_account_gt account_updated<mobile_app_account>]]</b>
                Client <- Server : <b>[[#account_restated_ltmobile_app_account_gt account_restated<mobile_app_account>]]</b>
                ... and so on ...
            end

            group depositing funds
                |||
                Client -> Server : <b>[[#deposit_funds deposit_funds]]</b>
                ... in case of <b>success</b>: ...
                Client <- Server : <b>[[#funds_deposit_pending funds_deposit_pending]]</b>
                Client <- Server : <b>[[#funds_deposit_processed funds_deposit_processed<simple_account>]]</b>
                ... in case of <b>failure</b>: ...
                Client <- Server : <b>[[#funds_action_rejected_ltdeposit_funds_gt funds_action_rejected<deposit_funds>]]</b>
            end

            group withdrawing funds
                |||
                Client -> Server : <b>[[#withdraw_funds withdraw_funds]]</b>
                ... in case of <b>success</b>: ...
                Client <- Server : <b>[[#funds_withdrawal_pending funds_withdrawal_pending]]</b>
                Client <- Server : <b>[[#funds_withdrawal_processed funds_withdrawal_processed]]</b>
                ... in case of <b>failure</b>: ...
                Client <- Server : <b>[[#funds_action_rejected_ltwithdraw_funds_gt funds_action_rejected<withdraw_funds>]]</b>
            end

            group examples of asynchronous [[#funds_notifications funds-related notifications]]:
                |||
                Client <- Server : <b>[[#funds_deposit_pending funds_deposit_pending]]</b>
                Client <- Server : <b>[[#funds_deposit_processed funds_deposit_processed<simple_account>]]</b>
                Client <- Server : <b>[[#funds_withdrawal_pending funds_withdrawal_pending]]</b>
                Client <- Server : <b>[[#funds_withdrawal_processed funds_withdrawal_processed]]</b>
                Client <- Server : <b>[[#funds_action_rejected_ltdeposit_funds_gt funds_action_rejected<deposit_funds>]]</b>
                Client <- Server : <b>[[#funds_action_rejected_ltwithdraw_funds_gt funds_action_rejected<withdraw_funds>]]</b>
                ... and so on ...
            end
        end
    end
end

@enduml

PlantUML version 1.2020.06(Sun Apr 05 13:38:32 WEST 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 15.0.1+9
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: US
-->
  </g>
</svg>